(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1397:(e,t,r)=>{Promise.resolve().then(r.bind(r,6299))},6299:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),l=r(2115),a=r(1540),n=r(4544);function i(e){let{mode:t,onModeChange:r}=e;return(0,s.jsxs)("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-sm font-medium ".concat("single"===t?"bg-blue-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>r("single"),children:"单个SVG"}),(0,s.jsx)("button",{className:"flex-1 py-2 px-4 text-sm font-medium ".concat("batch"===t?"bg-blue-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>r("batch"),children:"批量转换"})]})}function c(e){let{onFileUpload:t,onSvgContentChange:r,accept:a=".svg",multiple:n=!1,maxSize:i=5}=e,[c,o]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),m=e=>(h(null),e.name.toLowerCase().endsWith(".svg"))?!(e.size>1024*i*1024)||(h("文件大小不能超过 ".concat(i,"MB")),!1):(h("只支持上传SVG文件"),!1),x=(0,l.useCallback)(e=>{if(m(e)&&(t(e),r)){let t=new FileReader;t.onload=e=>{var t;let s=null==(t=e.target)?void 0:t.result;s&&r(s)},t.readAsText(e)}},[t,r,i]);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center ".concat(c?"border-blue-400 bg-blue-50":d?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400 bg-gray-50 hover:bg-gray-100"," transition-colors duration-150 cursor-pointer"),onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:e=>{e.preventDefault(),o(!1)},onDrop:e=>{e.preventDefault(),o(!1);let t=e.dataTransfer.files;t&&t.length>0&&x(t[0])},onClick:()=>{var e;return null==(e=document.getElementById("file-upload"))?void 0:e.click()},children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)("svg",{className:"w-12 h-12 ".concat(d?"text-red-400":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"点击上传"})," 或拖放SVG文件"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["仅支持SVG文件，最大",i,"MB"]}),d&&(0,s.jsx)("p",{className:"text-sm text-red-500 font-medium mt-2",children:d})]})}),(0,s.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",accept:a,multiple:n,onChange:e=>{let t=e.target.files;t&&t.length>0&&x(t[0])},className:"hidden"})]})}function o(e){let{value:t,onChange:r,placeholder:a="在此处粘贴SVG代码...",minHeight:n="200px",maxHeight:i="400px",label:c="SVG代码"}=e,[o,d]=(0,l.useState)(t);(0,l.useEffect)(()=>{d(t)},[t]);let h=e=>e.trim().startsWith("<svg")&&e.includes("</svg>");return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:c}),o&&(0,s.jsx)("button",{type:"button",onClick:()=>{d(""),r("")},className:"px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600",children:"清空"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{value:o,onChange:e=>{let t=e.target.value;d(t),r(t)},onPaste:e=>{let t=e.clipboardData.getData("text").match(/<svg[\s\S]*?<\/svg>/i);if(t){e.preventDefault();let s=t[0];d(s),r(s)}},placeholder:a,className:"w-full p-3 border border-gray-300 rounded-md font-mono text-sm ".concat(h(o)||""===o.trim()?"focus:ring-blue-500 focus:border-blue-500":"border-red-500 focus:ring-red-500 focus:border-red-500"),style:{minHeight:n,maxHeight:i,resize:"vertical"}}),!h(o)&&""!==o.trim()&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"输入的内容不是有效的SVG代码"}),""===o.trim()&&(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-50",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsx)("span",{className:"ml-2 text-gray-400",children:a})]})]})]})}function d(e){let{svgContent:t,width:r,height:a,keepAspectRatio:n=!0,loading:i=!1,error:c}=e,o=l.useRef(null);if(i)return(0,s.jsx)("div",{className:"flex justify-center items-center h-40 bg-gray-50 rounded-lg border",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full border-b-2 border-gray-900 animate-spin"})});if(c)return(0,s.jsx)("div",{className:"flex justify-center items-center h-40 text-red-500 bg-red-50 rounded-lg border border-red-200",children:(0,s.jsx)("p",{children:c})});if(!t)return(0,s.jsx)("div",{className:"flex justify-center items-center h-40 bg-gray-50 rounded-lg border",children:(0,s.jsx)("p",{className:"text-gray-400",children:"无预览内容"})});let d=new Blob([t],{type:"image/svg+xml"}),h=URL.createObjectURL(d);return l.useEffect(()=>()=>{URL.revokeObjectURL(h)},[h]),(0,s.jsx)("div",{ref:o,className:"flex overflow-hidden justify-center items-center bg-gray-50 rounded-lg border",style:{minHeight:"200px",position:"relative"},children:(0,s.jsx)("img",{src:h,alt:"SVG 预览",style:{width:r?"".concat(r,"px"):"auto",height:a?"".concat(a,"px"):"auto",maxWidth:"100%",maxHeight:"300px",objectFit:n?"contain":"fill"}})})}function h(e){let{width:t,height:r,onWidthChange:l,onHeightChange:a,aspectRatio:n=0,lockAspectRatio:i=!1,onToggleAspectRatio:c,presets:o=[],onPresetSelect:d}=e,h=o.length>0?o:[{name:"16x16",width:16,height:16,description:"小型图标，favicon"},{name:"32x32",width:32,height:32,description:"标准图标"},{name:"64x64",width:64,height:64,description:"中型图标，APP图标"},{name:"128x128",width:128,height:128,description:"大型图标"},{name:"256x256",width:256,height:256,description:"高清图标，小型logo"},{name:"512x512",width:512,height:512,description:"标准logo，宣传图"}];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1 mb-2 md:mb-0",children:[(0,s.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"宽度 (px)"}),(0,s.jsx)("input",{type:"number",min:"1",value:t||"",onChange:e=>{let t=parseInt(e.target.value)||0;l(t),i&&n>0&&a(Math.round(t/n))},className:"p-2 w-full rounded-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"高度 (px)"}),(0,s.jsx)("input",{type:"number",min:"1",value:r||"",onChange:e=>{let t=parseInt(e.target.value)||0;a(t),i&&n>0&&l(Math.round(t*n))},className:"p-2 w-full rounded-md border border-gray-300 focus:ring-blue-500 focus:border-blue-500"})]})]}),c&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"lock-aspect-ratio",type:"checkbox",checked:i,onChange:c,className:"w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:"lock-aspect-ratio",className:"block ml-2 text-sm text-gray-700",children:"锁定宽高比"})]}),d&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"预设尺寸"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:h.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>d(e),className:"flex flex-col items-center justify-center p-2 text-sm bg-white border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-colors",children:[(0,s.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.width,"\xd7",e.height]}),e.description&&(0,s.jsx)("span",{className:"text-xs text-gray-600 mt-1 text-center",children:e.description})]},e.name))})]})]})}function m(e){let{preserveStyle:t,onPreserveStyleChange:r}=e;return(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"样式设置"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:e=>r(e.target.checked),className:"w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("span",{className:"text-gray-700",children:"保持 SVG 原始样式"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(保留SVG原始样式属性和内联样式)"})]})})]})}function x(e){let{mode:t,onExport:r,isExporting:l,fileCount:a,disabled:n=!1}=e,i="single"===t;return(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"w-full py-2 px-4 text-white font-medium ".concat(i?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"," rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),onClick:r,disabled:n||l,children:l?"正在导出...":i?"导出 PNG":"批量导出 ".concat(a," 个文件")})})}function g(e){let{message:t,type:r="error"}=e;if(!t)return null;let l="",a=null;switch(r){case"success":l="text-green-600 bg-green-50 border-green-200",a=(0,s.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});break;case"warning":l="text-yellow-600 bg-yellow-50 border-yellow-200",a=(0,s.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});break;case"info":l="text-blue-600 bg-blue-50 border-blue-200",a=(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1v-3a1 1 0 00-1-1z",clipRule:"evenodd"})});break;default:l="text-red-600 bg-red-50 border-red-200",a=(0,s.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}return(0,s.jsxs)("div",{className:"flex p-3 mt-2 rounded border ".concat(l),children:[a&&(0,s.jsx)("div",{className:"flex-shrink-0 mr-2",children:a}),(0,s.jsx)("div",{className:"text-sm",children:t})]})}let u=[{width:16,height:16,name:"16x16",description:"小型图标，favicon"},{width:32,height:32,name:"32x32",description:"标准图标"},{width:64,height:64,name:"64x64",description:"中型图标，APP图标"},{width:128,height:128,name:"128x128",description:"大型图标"},{width:256,height:256,name:"256x256",description:"高清图标，小型logo"},{width:512,height:512,name:"512x512",description:"标准logo，宣传图"},{width:1024,height:1024,name:"1024x1024",description:"高清设计素材"},{width:1200,height:630,name:"1200x630",description:"社交媒体分享图（Facebook, Twitter）"},{width:1080,height:1080,name:"1080x1080",description:"Instagram, 微信朋友圈"},{width:1920,height:1080,name:"1920x1080",description:"高清壁纸，Full HD"}];function b(){let[e,t]=(0,l.useState)(""),[r,b]=(0,l.useState)(300),[p,f]=(0,l.useState)(300),[v,w]=(0,l.useState)(!0),[j,y]=(0,l.useState)(1),[N,S]=(0,l.useState)(""),[k,C]=(0,l.useState)("error"),[G,V]=(0,l.useState)("single"),[R,M]=(0,l.useState)(!0),[L,A]=(0,l.useState)(!1),[B,P]=(0,l.useState)([]),[E,z]=(0,l.useState)(!1),D=e=>{try{let t=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!t)return;let r=t.getAttribute("width"),s=t.getAttribute("height"),l=t.getAttribute("viewBox"),a=300,n=300;if(l){let e=l.split(" ");4===e.length&&(a=parseFloat(e[2]),n=parseFloat(e[3]))}r&&s?(r=r.replace("px",""),s=s.replace("px",""),b(Number(r)),f(Number(s)),y(Number(r)/Number(s))):l?(b(a),f(n),y(a/n)):(b(300),f(300),y(1))}catch(e){b(300),f(300),y(1)}};function F(e,t,r){let s=e,l=s.match(/viewBox=["']([^"']*)["']/);if(l&&l[1].split(/\s+/).map(Number),!R)return s=/width=["'][^"']*["']/.test(s)?s.replace(/width=["'][^"']*["']/,'width="'.concat(t,'"')):s.replace(/<svg/,'<svg width="'.concat(t,'"')),s=/height=["'][^"']*["']/.test(s)?s.replace(/height=["'][^"']*["']/,'height="'.concat(r,'"')):s.replace(/<svg/,'<svg height="'.concat(r,'"'));{let e=/width=["'][^"']*["']/.test(s),l=/height=["'][^"']*["']/.test(s);return s=e?s.replace(/width=["'][^"']*["']/,'width="'.concat(t,'"')):s.replace(/<svg/,'<svg width="'.concat(t,'"')),s=l?s.replace(/height=["'][^"']*["']/,'height="'.concat(r,'"')):s.replace(/<svg/,'<svg height="'.concat(r,'"'))}}let W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";S(e),C(t),"success"===t&&setTimeout(()=>S(""),3e3)},T=e=>{t(e),D(e),S("")},H=async()=>{try{if(!e.trim())return void W("请先上传或粘贴 SVG","error");S(""),z(!0);let t=document.createElement("canvas");t.width=r,t.height=p;let s=t.getContext("2d");if(!s){W("Canvas 初始化失败","error"),z(!1);return}let l=F(e,r,p);try{let e=await n.Wn.fromString(s,l,{ignoreAnimation:!0});await e.render()}catch(e){W("SVG 渲染失败: "+(e instanceof Error?e.message:e),"error"),z(!1);return}t.toBlob(e=>{if(!e){W("PNG 导出失败: Canvas.toBlob 返回空","error"),z(!1);return}(0,a.saveAs)(e,"export.png"),W("导出成功！","success"),z(!1)},"image/png")}catch(e){W("导出异常: "+(e instanceof Error?e.message:e),"error"),z(!1)}},O=async()=>{if(0===B.length)return void W("请先上传 SVG 文件","error");S(""),z(!0),W("正在导出...","info");try{for(let e=0;e<B.length;e++){let t=B[e],s=await t.text(),l=F(s,r,p);W("正在处理 ".concat(e+1,"/").concat(B.length,": ").concat(t.name),"info");let i=document.createElement("canvas");i.width=r,i.height=p;let c=i.getContext("2d");if(c)try{let e=await n.Wn.fromString(c,l,{ignoreAnimation:!0});await e.render(),await new Promise(e=>{i.toBlob(r=>{if(r){let e=t.name.replace(/\.svg$/i,".png");(0,a.saveAs)(r,e)}e()},"image/png")})}catch(e){console.error("处理文件 ".concat(t.name," 时出错:"),e)}}W("导出完成！成功导出 ".concat(B.length," 个文件"),"success")}catch(e){W("导出异常: "+(e instanceof Error?e.message:e),"error")}finally{z(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(i,{mode:G,onModeChange:e=>{V(e)}})}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"SVG 文件上传"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(c,{onFileUpload:e=>{P([e]);let r=new FileReader;r.onload=e=>{var r;let s=null==(r=e.target)?void 0:r.result;s&&(t(s),D(s))},r.readAsText(e),S("")},onSvgContentChange:T,accept:".svg",multiple:"batch"===G}),B.length>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["已选择 ",B.length," 个文件"]}),(0,s.jsx)("button",{className:"px-3 py-1 text-sm text-white bg-red-500 rounded transition hover:bg-red-600",onClick:()=>{P([]),t(""),S(""),b(300),f(300),y(1),V("single")},children:"清除队列"})]})]}),"single"===G&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(o,{value:e,onChange:T,placeholder:"在此粘贴 SVG 代码或上传 SVG 文件"})})]}),"single"===G&&e&&(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"SVG 预览"}),(0,s.jsx)(d,{svgContent:e,width:r,height:p,keepAspectRatio:v,error:N})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"mb-2 text-lg font-medium",children:"导出设置"}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(h,{width:r,height:p,onWidthChange:b,onHeightChange:f,aspectRatio:j,lockAspectRatio:v,onToggleAspectRatio:()=>{w(!v),v||y(r/p)},presets:u,onPresetSelect:e=>{b(e.width),f(e.height),v&&y(e.width/e.height),A(!1)}})}),(0,s.jsx)("div",{className:"pt-4 mt-4 border-t",children:(0,s.jsx)(m,{preserveStyle:R,onPreserveStyleChange:M})})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,s.jsx)(x,{mode:G,onExport:"single"===G?H:O,isExporting:E,fileCount:B.length,disabled:"single"===G&&!e.trim()||"batch"===G&&0===B.length}),N&&(0,s.jsx)(g,{message:N,type:k})]})]})}function p(){return(0,s.jsxs)("main",{className:"flex flex-col justify-center items-center p-4 min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"p-6 w-full max-w-lg bg-white rounded-xl shadow-lg",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-bold text-center",children:"SVG 转 PNG 工具"}),(0,s.jsx)(b,{})]}),(0,s.jsxs)("footer",{className:"mt-8 text-xs text-center text-gray-400",children:["\xa9 ",new Date().getFullYear()," SVG2PNG Tool"]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[652,135,441,684,358],()=>t(1397)),_N_E=e.O()}]);