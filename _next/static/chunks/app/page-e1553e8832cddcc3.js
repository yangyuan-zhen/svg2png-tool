(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1397:(e,t,a)=>{Promise.resolve().then(a.bind(a,4506))},4506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),s=a(2115),l=a(1540),n=a(4544);function i(){let[e,t]=(0,s.useState)(""),[a,i]=(0,s.useState)(300),[o,c]=(0,s.useState)(300),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(1),[x,g]=(0,s.useState)(""),[v,p]=(0,s.useState)(300),b=(0,s.useRef)(null),f=async e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(!r)return;if(!r.name.endsWith(".svg"))return void g("请上传 SVG 文件");let s=await r.text();t(s),N(s),g("")},N=e=>{try{let t=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!t)return;let a=t.getAttribute("width"),r=t.getAttribute("height"),s=t.getAttribute("viewBox"),l=300,n=300;if(s){let e=s.split(" ");4===e.length&&(l=parseFloat(e[2]),n=parseFloat(e[3]))}a&&r?(a=a.replace("px",""),r=r.replace("px",""),i(Number(a)),c(Number(r)),m(Number(a)/Number(r))):s?(i(l),c(n),m(l/n)):(i(300),c(300),m(1))}catch(e){i(300),c(300),m(1)}},j=async()=>{try{let t,r;if(!e.trim())return void g("请先上传或粘贴 SVG");g("");let s=document.createElement("canvas");s.width=a,s.height=o;let i=s.getContext("2d");if(!i)return void g("Canvas 初始化失败");let c=(r=e,r=/width="[^"]*"/.test(r)?r.replace(/width="[^"]*"/,'width="'.concat(a,'"')):r.replace(/<svg/,'<svg width="'.concat(a,'"')),r=/height="[^"]*"/.test(r)?r.replace(/height="[^"]*"/,'height="'.concat(o,'"')):r.replace(/<svg/,'<svg height="'.concat(o,'"')));try{t=await n.Wn.fromString(i,c,{ignoreAnimation:!0}),await t.render()}catch(e){g("SVG 渲染失败: "+(e instanceof Error?e.message:e));return}s.toBlob(e=>{if(!e)return void g("PNG 导出失败: Canvas.toBlob 返回空");(0,l.saveAs)(e,"export.png")},"image/png")}catch(e){g("导出异常: "+(e instanceof Error?e.message:e))}};return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1 font-medium",children:"上传 SVG 文件"}),(0,r.jsxs)("div",{className:"flex relative flex-col justify-center items-center p-6 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed transition cursor-pointer hover:border-blue-400 hover:text-blue-600",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:async e=>{var a;e.preventDefault(),e.stopPropagation();let r=null==(a=e.dataTransfer.files)?void 0:a[0];if(r&&r.name.endsWith(".svg")){let e=await r.text();t(e),N(e),g("")}else g("请上传 SVG 文件")},style:{minHeight:100},children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mb-2 w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4a1 1 0 011-1h8a1 1 0 011 1v12m-4 4h-4a1 1 0 01-1-1v-4h6v4a1 1 0 01-1 1z"})}),(0,r.jsx)("span",{className:"text-sm",children:"点击或拖拽 SVG 文件到此处上传"}),(0,r.jsx)("input",{ref:b,type:"file",accept:".svg",className:"absolute inset-0 opacity-0 cursor-pointer",style:{width:"100%",height:"100%"},onChange:f,tabIndex:-1}),e&&(0,r.jsx)("span",{className:"mt-2 text-xs text-green-600",children:"已选择文件"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1 font-medium",children:"或粘贴 SVG 代码"}),(0,r.jsx)("textarea",{className:"p-2 w-full h-28 text-sm rounded border resize-none",placeholder:"<svg>...</svg>",value:e,onChange:e=>{t(e.target.value),N(e.target.value),g("")},onPaste:e=>{let a=e.clipboardData.getData("text");t(a),N(a),g("")}})]}),e.trim()?(0,r.jsx)("div",{className:"flex justify-center p-2 mb-2 bg-gray-100 rounded border",children:(0,r.jsx)("div",{className:"overflow-auto max-w-full max-h-60",dangerouslySetInnerHTML:{__html:e}})}):null,(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("label",{className:"font-medium",children:"宽度(px)"}),(0,r.jsx)("input",{type:"number",min:1,className:"p-1 w-20 rounded border",value:a,onChange:e=>{let t=Number(e.target.value);i(t),d&&c(Math.round(t/h))}}),(0,r.jsx)("label",{className:"font-medium",children:"高度(px)"}),(0,r.jsx)("input",{type:"number",min:1,className:"p-1 w-20 rounded border",value:o,onChange:e=>{let t=Number(e.target.value);c(t),d&&i(Math.round(t*h))}}),(0,r.jsxs)("label",{className:"flex gap-1 items-center ml-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:d,onChange:e=>{u(e.target.checked),e.target.checked&&c(Math.round(a/h))}}),"保持宽高比"]})]}),(0,r.jsx)("button",{className:"py-2 mt-2 w-full font-bold text-white bg-blue-600 rounded transition hover:bg-blue-700",onClick:j,children:"导出 PNG"}),x&&(0,r.jsx)("div",{className:"mt-1 text-sm text-red-500",children:x})]})})}function o(){return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:[(0,r.jsxs)("div",{className:"w-full max-w-lg bg-white rounded-xl shadow-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"SVG 转 PNG 工具"}),(0,r.jsx)(i,{})]}),(0,r.jsxs)("footer",{className:"mt-8 text-gray-400 text-xs text-center",children:["\xa9 ",new Date().getFullYear()," SVG2PNG Tool"]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[652,135,441,684,358],()=>t(1397)),_N_E=e.O()}]);